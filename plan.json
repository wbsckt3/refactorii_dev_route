{
  id: 1,
  nombre: 'Plan_Automatizacion_Login_001',
  testId: 'TC_AUTH_LOGIN_001',
  objetivo: 'Verificar que un usuario registrado puede autenticarse exitosamente en el sistema CRM utilizando credenciales v√°lidas, validando la funcionalidad de login, redirecci√≥n al dashboard principal y carga correcta de los elementos de la interfaz de usuario seg√∫n los requisitos funcionales RF-001 y RF-002.',
  precondiciones: "- Usuario con rol 'Sales Manager' registrado en base de datos (email: testuser@company.com, password: Test123!@#)\n" +
     "- Base de datos MySQL en estado limpio con datos de prueba cargados\n " +
     "- Servidor de aplicaci√≥n en ambiente QA ejecut√°ndose en puerto 8080\n " +
     "- Navegador Chrome versi√≥n 120+ instalado y configurado\n" +
     "- Conexi√≥n de red estable (latencia < 100ms)\n" +
     "- Certificados SSL v√°lidos configurados\n" +
     "- Session storage y cookies habilitadas en navegador'",
  pasos: '1. Abrir navegador Chrome y navegar a https://qa-crm.company.com/login\n' +
    '2. Verificar que la p√°gina de login se carga completamente (t√≠tulo, formulario, botones)\n' +
    "3. Ingresar email v√°lido en campo 'username': testuser@company.com\n" +
    "4. Ingresar contrase√±a v√°lida en campo 'password': Test123!@#\n" +
    "5. Hacer clic en bot√≥n 'Iniciar Sesi√≥n' (id='login-btn')\n" +
    '6. Esperar redirecci√≥n autom√°tica (m√°ximo 3 segundos)\n' +
    '7. Verificar carga completa del dashboard principal\n' +
    '8. Validar elementos UI cr√≠ticos: men√∫ navegaci√≥n, widget bienvenida, datos usuario\n' +
    '9. Verificar ausencia de errores JavaScript en consola del navegador',
  datosPrueba: 'DATOS V√ÅLIDOS:\n' +
    '- Email: testuser@company.com\n' +
    '- Password: Test123!@#\n' +
    '- Rol esperado: Sales Manager\n' +
    '- ID Usuario: 12345\n' +
    '- Nombre completo: Juan P√©rez Gonz√°lez\n' +
    '\n' +
    'DATA SET ADICIONAL:\n' +
    '- URL Base: https://qa-crm.company.com\n' +
    '- Timeout m√°ximo: 30 segundos\n' +
    '- User-Agent: Chrome/120.0.0.0\n' +
    '- Resoluci√≥n pantalla: 1920x1080\n' +
    '- Zona horaria: GMT-5',
  resultadoEsperado: '- HTTP Status Code 200 en respuesta de autenticaci√≥n\n' +
    '- Redirecci√≥n exitosa a /dashboard en m√°ximo 3 segundos\n' +
    '- Token JWT v√°lido almacenado en sessionStorage\n' +
    "- Mensaje de bienvenida visible: 'Bienvenido, Juan P√©rez'\n" +
    '- Men√∫ principal cargado con opciones: Clientes, Ventas, Reportes, Configuraci√≥n\n' +
    '- Widget de estad√≠sticas personales visible con datos actualizados\n' +
    '- Footer con informaci√≥n de sesi√≥n: fecha/hora √∫ltimo acceso\n' +
    '- URL final: https://qa-crm.company.com/dashboard\n' +
    "- T√≠tulo de p√°gina: 'CRM Dashboard - Sales Manager'",
  criteriosAceptacion: 'FUNCIONALES:\n' +
    '- Tiempo de respuesta de autenticaci√≥n < 2 segundos\n' +
    '- Tiempo total de carga del dashboard < 5 segundos\n' +
    '- Todos los elementos cr√≠ticos de UI visibles y funcionales\n' +
    '- Datos de usuario correctos mostrados en interfaz\n' +
    '\n' +
    'T√âCNICOS:\n' +
    '- Sin errores JavaScript en consola del navegador\n' +
    '- Sin errores HTTP 4xx o 5xx en Network tab\n' +
    '- Memoria utilizada por p√°gina < 50MB\n' +
    '- CPU usage durante carga < 80%\n' +
    '\n' +
    'SEGURIDAD:\n' +
    '- Token de sesi√≥n generado y almacenado correctamente\n' +
    '- Headers de seguridad presentes (X-Frame-Options, CSP)\n' +
    '- Contrase√±a no visible en logs o network requests',
  tipoAplicacion: 'Web Application (SPA - Single Page Application)',
  tipoPrueba: 'End-to-End (E2E) Authentication Test',
  framework: 'Cypress + JavaScript + Cucumber (BDD)',
  pipeline: 'GitLab CI/CD',
  prioridad: 'High (P1) - Critical Business Function',
  fechaEjecucion: '2025-01-20T09:00:00',
  ambiente: 'Testing (QA/TEST) - qa-crm.company.com',
  progreso: 0,
  timestamp: '2025-01-09T19:17:42.000Z',
  exercises: '```markdown\n' +
    '# üìù Plan de Automatizaci√≥n de Pruebas - TC_AUTH_LOGIN_001\n' +
    '\n' +
    '---\n' +
    '\n' +
    '## üîç 1. Escenario de Prueba Estructurado (ISTQB)\n' +
    '\n' +
    '### üè∑Ô∏è Identificaci√≥n\n' +
    '- **ID**: TC_AUTH_LOGIN_001\n' +
    '- **Nombre**: Autenticaci√≥n exitosa de usuario Sales Manager en CRM\n' +
    '\n' +
    '### ‚öôÔ∏è Precondiciones Detalladas\n' +
    "1. Usuario con rol 'Sales Manager' existente en BD MySQL con:\n" +
    '   ```sql\n' +
    "   INSERT INTO users VALUES (12345, 'testuser@company.com', '$2a$10$x...', 'Juan P√©rez Gonz√°lez', 'Sales Manager');\n" +
    '   ```\n' +
    '2. Ambiente QA accesible en `https://qa-crm.company.com:8080`\n' +
    '3. Chrome v120+ configurado con:\n' +
    '   ```json\n' +
    '   {\n' +
    '     "resolution": "1920x1080",\n' +
    '     "timezone": "GMT-5",\n' +
    '     "userAgent": "Chrome/120.0.0.0"\n' +
    '   }\n' +
    '   ```\n' +
    '\n' +
    '### üöÄ Pasos de Ejecuci√≥n\n' +
    '1. **GET** `/login` ‚Üí Validar status 200 y carga de DOM completo\n' +
    '2. **Validar UI Login**:\n' +
    '   - T√≠tulo p√°gina: "CRM Login"\n' +
    '   - Existencia de campos: `#username`, `#password`, `#login-btn`\n' +
    '3. **POST** `/auth` con payload:\n' +
    '   ```json\n' +
    '   {\n' +
    '     "username": "testuser@company.com",\n' +
    '     "password": "Test123!@#"\n' +
    '   }\n' +
    '   ```\n' +
    '4. **Validar respuesta**:\n' +
    '   - Status 200\n' +
    '   - Headers: `Location: /dashboard`\n' +
    '   - SessionStorage: `jwtToken` presente\n' +
    '5. **Validar Dashboard**:\n' +
    '   - Tiempo carga <5s\n' +
    '   - Elementos cr√≠ticos visibles (selectores CSS):\n' +
    '     ```css\n' +
    '     #nav-menu, #welcome-msg, #user-stats-widget\n' +
    '     ```\n' +
    '\n' +
    '### üìä Datos de Prueba\n' +
    '| Campo       | Valor                   | Tipo Validaci√≥n |\n' +
    '|-------------|-------------------------|-----------------|\n' +
    '| username    | testuser@company.com    | Regex email     |\n' +
    '| password    | Test123!@#              | Complexidad     |\n' +
    '\n' +
    '### ‚úÖ Resultado Esperado\n' +
    '- **Funcional**:\n' +
    '  - Redirecci√≥n a `/dashboard` en ‚â§3s\n' +
    '  - Mensaje bienvenida: "Bienvenido, Juan P√©rez"\n' +
    '- **T√©cnico**:\n' +
    '  ```javascript\n' +
    '  console.errors.length === 0\n' +
    '  performance.memory.usedJSHeapSize < 50MB\n' +
    '  ```\n' +
    '\n' +
    '### ÔøΩ Criterios de Aceptaci√≥n\n' +
    '| √Årea        | M√©trica                     | Umbral |\n' +
    '|-------------|-----------------------------|--------|\n' +
    '| Rendimiento | Tiempo autenticaci√≥n        | <2s    |\n' +
    '| Seguridad   | Headers CSP                 | Presente |\n' +
    '| UI          | Elementos cr√≠ticos          | 100% visibles |\n' +
    '\n' +
    '### üö™ Criterios de Salida\n' +
    '- **√âxito**: Todos los criterios cumplidos + evidencia generada\n' +
    '- **Fallo**: \n' +
    '  - Errores en consola\n' +
    '  - Tiempos excedidos\n' +
    '  - Elementos faltantes\n' +
    '\n' +
    '---\n' +
    '\n' +
    '## ü§ñ 2. Estrategia de Automatizaci√≥n\n' +
    '\n' +
    '### üìà Justificaci√≥n\n' +
    '- **ROI**: Ejecutado 15x/d√≠a (regresi√≥n + builds) ‚Üí Ahorro 75h/mes\n' +
    '- **Criticidad**: P1 - Flujo core business\n' +
    '- **Frecuencia**: Pre-commit + nightly builds\n' +
    '\n' +
    '### üèóÔ∏è Nivel de Prueba\n' +
    '- **Pir√°mide**: Capa E2E (10% del portfolio de autos)\n' +
    '- **Cobertura**: \n' +
    '  ```mermaid\n' +
    '  graph LR\n' +
    '    A[UI] --> B[API Auth] --> C[DB State]\n' +
    '  ```\n' +
    '\n' +
    '### üéØ Enfoque\n' +
    '- **Patr√≥n**: BDD con Gherkin + Page Objects\n' +
    '- **T√©cnicas**:\n' +
    '  - Black-box para flujo UI\n' +
    '  - Gray-box para validaci√≥n JWT\n' +
    '\n' +
    '### ‚ö†Ô∏è Riesgos y Mitigaci√≥n\n' +
    '| Riesgo                     | Mitigaci√≥n                          |\n' +
    '|----------------------------|-------------------------------------|\n' +
    '| Selectores CSS fr√°giles    | Usar data-test-id attributes        |\n' +
    '| Dependencia datos BD       | Factory Bot + transactions rollback |\n' +
    '| Timing issues              | Esperas inteligentes (Polling)      |\n' +
    '\n' +
    '---\n' +
    '\n' +
    '## üíª 3. Dise√±o T√©cnico\n' +
    '\n' +
    '### üõ†Ô∏è Framework Justificado\n' +
    '```mermaid\n' +
    'graph TD\n' +
    '  A[Cypress 12] --> B[BDD con Cucumber]\n' +
    '  A --> C[Allure Reports]\n' +
    '  A --> D[Axios para API checks]\n' +
    '```\n' +
    '\n' +
    '**Ventajas**:\n' +
    '- Soporte SPA out-of-the-box\n' +
    '- Timeouts configurables\n' +
    '- Debugging interactivo\n' +
    '\n' +
    '### üèõÔ∏è Arquitectura\n' +
    '```\n' +
    'tests/\n' +
    '‚îú‚îÄ‚îÄ features/\n' +
    '‚îÇ   ‚îî‚îÄ‚îÄ login.feature # Gherkin\n' +
    '‚îú‚îÄ‚îÄ pages/\n' +
    '‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.js # Page Object\n' +
    '‚îÇ   ‚îî‚îÄ‚îÄ DashboardPage.js\n' +
    '‚îú‚îÄ‚îÄ step_definitions/\n' +
    '‚îî‚îÄ‚îÄ support/\n' +
    '    ‚îú‚îÄ‚îÄ commands.js # Custom commands\n' +
    '    ‚îî‚îÄ‚îÄ dbUtils.js # DB helpers\n' +
    '```\n' +
    '\n' +
    '### ‚öôÔ∏è Configuraci√≥n Ambiente\n' +
    '```javascript\n' +
    '// cypress.config.js\n' +
    'module.exports = {\n' +
    '  env: {\n' +
    "    baseUrl: 'https://qa-crm.company.com',\n" +
    "    apiUrl: 'https://qa-api.company.com'\n" +
    '  },\n' +
    "  viewport: '1920x1080'\n" +
    '}\n' +
    '```\n' +
    '\n' +
    '### üóÉÔ∏è Gesti√≥n de Datos\n' +
    '- **Factory Bot** para datos iniciales:\n' +
    '  ```javascript\n' +
    "  Factory.define('user').attrs({\n" +
    "    email: 'testuser@company.com',\n" +
    "    role: 'Sales Manager'\n" +
    '  })\n' +
    '  ```\n' +
    '- **Hooks**:\n' +
    '  ```gherkin\n' +
    "  Before(() => cy.task('db:seed'));\n" +
    "  After(() => cy.task('db:clean'));\n" +
    '  ```\n' +
    '\n' +
    '### ‚è±Ô∏è Sincronizaci√≥n\n' +
    '- **Estrategia**:\n' +
    '  ```javascript\n' +
    "  cy.get('#element', { timeout: 10000 })\n" +
    "    .should('be.visible')\n" +
    '  ```\n' +
    '- **Polling** para API:\n' +
    '  ```javascript\n' +
    '  cy.waitUntil(() => \n' +
    "    cy.request('/api/status')\n" +
    "      .its('body.status')\n" +
    "      .should('eq', 'ready')\n" +
    '  )\n' +
    '  ```\n' +
    '\n' +
    '---\n' +
    '\n' +
    '## üîÑ 4. Integraci√≥n CI/CD\n' +
    '\n' +
    '### üì¶ Pipeline GitLab\n' +
    '```yaml\n' +
    'stages:\n' +
    '  - test\n' +
    '  \n' +
    'e2e_tests:\n' +
    '  stage: test\n' +
    '  image: cypress/browsers:node-18-chrome-120\n' +
    '  script:\n' +
    '    - npm install\n' +
    '    - npx cypress run --env configFile=qa\n' +
    '  artifacts:\n' +
    '    paths:\n' +
    '      - cypress/reports/\n' +
    '      - cypress/screenshots/\n' +
    '    when: always\n' +
    '```\n' +
    '\n' +
    '### üö¶ Triggers\n' +
    '- **On**: \n' +
    '  - Merge requests a `main`\n' +
    '  - Cron: 0 2 * * * (regresi√≥n nocturna)\n' +
    '\n' +
    '### üìä Reportes\n' +
    '- **Allure** con:\n' +
    '  - Screenshots en fallos\n' +
    '  - Video de ejecuci√≥n\n' +
    '  - Consola del navegador\n' +
    '\n' +
    '### üîî Notificaciones\n' +
    '```yaml\n' +
    'notifications:\n' +
    '  slack:\n' +
    "    channel: '#qa-alerts'\n" +
    '    on_failure: always\n' +
    '```\n' +
    '\n' +
    '### ‚Ü©Ô∏è Rollback\n' +
    '- **Estrategia**: \n' +
    '  - Bloquear despliegue si falla\n' +
    '  - Notificar a DEV + QA Lead\n' +
    '\n' +
    '---\n' +
    '\n' +
    '## üíª 5. C√≥digo Base\n' +
    '\n' +
    '### üñ•Ô∏è Implementaci√≥n Cypress + Cucumber\n' +
    '\n' +
    '**login.feature**:\n' +
    '```gherkin\n' +
    'Feature: Authentication\n' +
    '  Scenario: Successful login as Sales Manager\n' +
    '    Given I navigate to the login page\n' +
    '    When I enter valid credentials\n' +
    '    Then I should be redirected to dashboard\n' +
    '```\n' +
    '\n' +
    '**LoginPage.js**:\n' +
    '```javascript\n' +
    'class LoginPage {\n' +
    '  elements = {\n' +
    "    username: () => cy.get('#username'),\n" +
    "    password: () => cy.get('#password'),\n" +
    "    loginBtn: () => cy.get('#login-btn')\n" +
    '  }\n' +
    '\n' +
    '  login(username, password) {\n' +
    '    this.elements.username().type(username)\n' +
    '    this.elements.password().type(password)\n' +
    '    this.elements.loginBtn().click()\n' +
    '  }\n' +
    '}\n' +
    '```\n' +
    '\n' +
    '**steps.js**:\n' +
    '```javascript\n' +
    "Given('I navigate to the login page', () => {\n" +
    "  cy.visit('/login')\n" +
    '  cy.injectAxe() // Accessibility check\n' +
    '})\n' +
    '\n' +
    "Then('I should be redirected to dashboard', () => {\n" +
    "  cy.url().should('include', '/dashboard')\n" +
    "  cy.window().its('sessionStorage.jwtToken').should('exist')\n" +
    '  \n' +
    '  // Performance check\n' +
    '  cy.lighthouse({\n' +
    '    performance: 90,\n' +
    '    accessibility: 100\n' +
    '  })\n' +
    '})\n' +
    '```\n' +
    '\n' +
    '---\n' +
    '\n' +
    '## üìä 6. M√©tricas y Monitoreo\n' +
    '\n' +
    '### üéØ KPIs\n' +
    '| M√©trica                  | Objetivo |\n' +
    '|--------------------------|----------|\n' +
    '| Tasa √©xito               | ‚â•98%     |\n' +
    '| Tiempo ejecuci√≥n         | <2m      |\n' +
    '| Flakiness rate           | <1%      |\n' +
    '\n' +
    '### üîç Calidad C√≥digo\n' +
    '- **Coverage**: 100% pasos Gherkin implementados\n' +
    '- **Linting**: ESLint con reglas Airbnb\n' +
    '- **Complexidad**: McCabe <5 por funci√≥n\n' +
    '\n' +
    '### üìà Indicadores\n' +
    '```mermaid\n' +
    'pie\n' +
    '  title Estabilidad (30 d√≠as)\n' +
    '  "Passed" : 92\n' +
    '  "Failed" : 3\n' +
    '  "Flaky" : 5\n' +
    '```\n' +
    '\n' +
    '### ‚è±Ô∏è Tiempos\n' +
    '- **Ejecuci√≥n local**: 45s\n' +
    '- **CI/CD**: 1m 20s (con paralelizaci√≥n)\n' +
    '```'
}
